---
kind: pipeline
name: main

steps:
- name: docker
  image: plugins/docker
  settings:
    repo: grafana/grafana-build
    username:
      from_secret: dockerhub_username
    password:
      from_secret: dockerhub_password

trigger:
  branch:
  - add-dockerfile
---
get:
  name: username
  path: infra/data/ci/docker_hub
kind: secret
name: dockerhub_username
---
get:
  name: password
  path: infra/data/ci/docker_hub
kind: secret
name: dockerhub_password
---
kind: signature
hmac: 5a94b0edceb24bf766739b544b9b021c6e63a2c37eeb702749cae1004feba985

...
